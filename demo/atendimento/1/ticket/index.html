<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ticket de Atendimento</title>
  <style>
    :root{
      --fg:#0f172a;
      --muted:#475569;
      --line:#e2e8f0;
      --bg:#f8fafc;
    }
    html, body{
      margin:0;
      padding:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif;
      color: var(--fg);
      background: var(--bg);
    }
    .page{
      max-width: 820px;
      margin: 24px auto;
      padding: 0 14px;
    }
    .toolbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom: 12px;
    }
    .toolbar .hint{
      font-size:.95rem;
      color: var(--muted);
    }
    .btn{
      appearance:none;
      border: 1px solid var(--line);
      background: white;
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight: 600;
    }
    .btn.primary{
      border-color: #1d4ed8;
      background: #2563eb;
      color: white;
    }
    .ticket{
      background: white;
      border: 1px solid var(--line);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 12px 30px rgba(0,0,0,.08);
    }
    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      padding-bottom: 14px;
      border-bottom: 1px dashed var(--line);
      margin-bottom: 14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
    }
    .brand img{
      height: 44px;
      width: auto;
      object-fit: contain;
    }
    .brand .name{
      font-weight: 800;
      font-size: 1.05rem;
      line-height: 1.1;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 520px;
    }
    .brand .sub{
      color: var(--muted);
      font-size:.9rem;
      margin-top: 2px;
    }
    .proto{
      text-align:right;
    }
    .proto .label{color: var(--muted); font-size:.85rem;}
    .proto .value{font-size: 1.45rem; font-weight: 900; letter-spacing: .6px;}

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }
    .item{
      border: 1px solid var(--line);
      border-radius: 14px;
      padding: 12px;
    }
    .item .k{color: var(--muted); font-size:.85rem;}
    .item .v{font-size: 1.02rem; font-weight: 700; margin-top: 2px; word-break: break-word;}

    .note{
      margin-top: 14px;
      color: var(--muted);
      font-size: .9rem;
      line-height: 1.35;
    }

    @media print{
      :root{--bg:#ffffff}
      .page{margin:0; max-width: 100%; padding: 0;}
      .toolbar{display:none !important;}
      body{background: white;}
      .ticket{border: 1px solid #000; box-shadow:none; border-radius: 0; padding: 14px;}
      .item{border-color: #000;}
      .header{border-bottom: 1px dashed #000;}
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="toolbar">
      <div class="hint">Ticket de atendimento — pronto para impressão.</div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <button class="btn" type="button" onclick="window.close && window.close()">Fechar</button>
        <button class="btn primary" type="button" onclick="window.print()">Imprimir</button>
      </div>
    </div>

    <div class="ticket" role="document" aria-label="Ticket de atendimento">
      <div class="header">
        <div class="brand">
          
            <div style="width:44px;height:44px;border-radius:12px;background:#0f172a;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:900">PD</div>
          
          <div style="min-width:0">
            <div class="name">namespace(nome=&#39;Sua Empresa (DEMO)&#39;, endereco=&#39;Endereço aqui&#39;, telefone=&#39;(00) 0000-0000&#39;)</div>
            <div class="sub">Comprovante de atendimento</div>
          </div>
        </div>
        <div class="proto">
          <div class="label">Protocolo</div>
          <div class="value">PD-1001</div>
        </div>
      </div>

      
      
      
        
      

      <div class="grid">
        <div class="item">
          <div class="k">Data e hora</div>
          <div class="v">21/02/2026 16:15</div>
        </div>
        <div class="item">
          <div class="k">Tipo</div>
          <div class="v"></div>
        </div>
        <div class="item">
          <div class="k">Cidadão</div>
          <div class="v">-</div>
        </div>
        <div class="item">
          <div class="k">CPF</div>
          <div class="v">123.456.789-01</div>
        </div>
        <div class="item">
          <div class="k">Unidade / Solicitante</div>
          <div class="v">-</div>
        </div>
        <div class="item">
          <div class="k">Status</div>
          <div class="v">Aberto</div>
        </div>
      </div>

      <div class="note">
        <div><b>Observação:</b> este ticket é um comprovante do registro do atendimento no sistema.</div>
        <div>Guarde este número de protocolo para acompanhar o andamento, se necessário.</div>
      </div>
    </div>
  </div>

<script>
(function(){
  var host = location.hostname || '';
  var seg = location.pathname.split('/').filter(Boolean);
  var base = '';
  if (host.endsWith('github.io') && seg.length>0) base = '/' + seg[0];
  window.PD_BASE = base;

  function prefixURL(u){
    if(!u || typeof u!=='string') return u;
    if(!base) return u;
    if(u.startsWith('http://')||u.startsWith('https://')||u.startsWith('mailto:')||u.startsWith('#')) return u;
    if(u.startsWith('/')) return base + u;
    return u;
  }
  function patch(){
    document.querySelectorAll('a[href]').forEach(function(a){ a.setAttribute('href', prefixURL(a.getAttribute('href'))); });
    document.querySelectorAll('form[action]').forEach(function(f){ f.setAttribute('action', prefixURL(f.getAttribute('action'))); });
    document.querySelectorAll('[data-astro-modal-url]').forEach(function(b){
      b.setAttribute('data-astro-modal-url', prefixURL(b.getAttribute('data-astro-modal-url')));
    });
    document.querySelectorAll('link[href]').forEach(function(l){
      var h=l.getAttribute('href');
      if(h && h.startsWith('/static/')) l.setAttribute('href', prefixURL(h));
    });
    document.querySelectorAll('audio source[src], audio[src]').forEach(function(el){
      var s=el.getAttribute('src'); if(s && s.startsWith('/static/')) el.setAttribute('src', prefixURL(s));
    });
    document.querySelectorAll('img[src]').forEach(function(img){
      var s=img.getAttribute('src'); if(s && s.startsWith('/')) img.setAttribute('src', prefixURL(s));
    });
  }

  function isLogged(){ try{return localStorage.getItem('pd_demo_logged')==='1';}catch(e){return false;} }
  function setLogged(v){ try{localStorage.setItem('pd_demo_logged', v?'1':'0');}catch(e){} }

  document.addEventListener('submit', function(ev){
    var f = ev.target;
    if(!f || f.tagName!=='FORM') return;
    var action = (f.getAttribute('action')||'');
    action = action.replace(base,'');
    if(action === '/login'){
      ev.preventDefault();
      setLogged(true);
      location.href = prefixURL('/');
      return;
    }
    if((f.getAttribute('method')||'').toLowerCase()==='post'){
      ev.preventDefault();
      if(window.toast) window.toast('Ação desativada na versão demonstrativa.');
      else alert('Ação desativada na versão demonstrativa.');
    }
  }, true);

  document.addEventListener('DOMContentLoaded', function(){
    patch();
    var p = (location.pathname||'').replace(base,'') || '/';
    if((p !== '/login' && p !== '/login/') && !isLogged()){
      location.replace(prefixURL('/login/'));
      return;
    }
    document.querySelectorAll('a[href]').forEach(function(a){
      var href=(a.getAttribute('href')||'').replace(base,'');
      if(href==='/logout'){
        a.addEventListener('click', function(e){ e.preventDefault(); setLogged(false); location.href=prefixURL('/login/'); });
      }
    });

    var realFetch = window.fetch;
    window.fetch = function(input, init){
      var url = (typeof input === 'string') ? input : (input && input.url) ? input.url : '';
      var u = (url||'').replace(base,'');
      if(u.startsWith('/api/')){
        if(u.startsWith('/api/notificacoes/atendimentos')){
          return Promise.resolve(new Response(JSON.stringify({items:[]}), {status:200, headers:{'Content-Type':'application/json'}}));
        }
        if(u.startsWith('/api/visitas/settings')){
          return Promise.resolve(new Response(JSON.stringify({theme:'light'}), {status:200, headers:{'Content-Type':'application/json'}}));
        }
        if(u.startsWith('/api/visitas/item/')){
          return Promise.resolve(new Response(JSON.stringify({ok:true}), {status:200, headers:{'Content-Type':'application/json'}}));
        }
        if(u.startsWith('/api/atendimento/')){
          return Promise.resolve(new Response(JSON.stringify({ok:true}), {status:200, headers:{'Content-Type':'application/json'}}));
        }
      }
      return realFetch(input, init);
    };
  });
})();
</script>

</body>
</html>