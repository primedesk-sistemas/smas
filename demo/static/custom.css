
:root{
  --bg: #f7f7fb;
  --card: #ffffff;
  --text: #0f172a;
  --muted: #6b7280;
  --primary: #111827;
  --border: #e5e7eb;
  --radius: 14px;
  --shadow: 0 10px 20px rgba(0,0,0,0.06);
  --brand: #111827;
  --green:#065f46; --green-bg:#d1fae5;
  --yellow:#92400e; --yellow-bg:#fef3c7;
  --red:#991b1b; --red-bg:#fee2e2;
  --blue:#1d4ed8; --blue-bg:#dbeafe;
}

/* Dark theme (toggle via html[data-theme="dark"]) */
html[data-theme="dark"]{
  --bg: #0b1220;
  --card: #0f172a;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --primary: #e5e7eb;
  --border: rgba(255,255,255,.12);
  --shadow: 0 10px 26px rgba(0,0,0,0.45);
  --brand: #e5e7eb;
  --green:#34d399; --green-bg: rgba(16,185,129,.15);
  --yellow:#fbbf24; --yellow-bg: rgba(245,158,11,.15);
  --red:#f87171; --red-bg: rgba(239,68,68,.14);
  --blue:#93c5fd; --blue-bg: rgba(59,130,246,.16);
}
*{box-sizing:border-box;}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans",sans-serif;}
a{color:#0a58ca;text-decoration:none} a:hover{text-decoration:underline}
html[data-theme="dark"] a{color:#93c5fd}
header{position:sticky;top:0;z-index:100;background:rgba(255,255,255,.92);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);}
html[data-theme="dark"] header{background:rgba(15,23,42,.92)}
.container{max-width:1100px;margin:0 auto;padding:12px 16px;}
.topbar-container{max-width:1400px}

/*
  Correção: em algumas páginas apareciam "linhas pretas" nas laterais/topo/rodapé.
  Isso pode ocorrer se algum CSS externo/cache aplica borda/outline ao .container/main.
  Forçamos aqui que a área de layout não receba bordas/outline.
*/
.container,
main.container,
#app-main.container{
  border: 0 !important;
  outline: 0 !important;
  box-shadow: none;
}

.brand{display:flex;align-items:center;gap:12px}
.brand-badge{width:36px;height:36px;border-radius:12px;background:var(--brand);color:#fff;display:grid;place-items:center;font-weight:700}
.brand-sub{font-size:12px;color:var(--muted);line-height:1}
.brand-title{font-weight:600}
.nav{display:flex;gap:8px;align-items:center;flex-wrap:wrap;justify-content:flex-end}
.nav a{
  text-decoration:none;
  color:var(--muted);
  font-size:13px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid transparent;
  transition:background .15s,border-color .15s,color .15s;
}
.nav a:hover{text-decoration:none;color:var(--text);background:#f3f4f6;border-color:var(--border)}
.nav a.active{color:var(--text);font-weight:700;background:#eef2ff;border-color:#e0e7ff}
html[data-theme="dark"] .nav a:hover{background:rgba(255,255,255,.06)}
html[data-theme="dark"] .nav a.active{background:rgba(147,197,253,.14);border-color:rgba(147,197,253,.25)}
.nav a:last-child{margin-left:6px}

@media (max-width: 760px){
  .container{padding:10px 12px}
  .brand-title{max-width:160px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .nav{gap:6px}
  .nav a{padding:7px 9px;font-size:12.5px}
}
main{padding:24px 16px}
.grid{display:grid;gap:24px}
.grid-3{grid-template-columns: 1fr}
@media(min-width:992px){.grid-3{grid-template-columns: 2fr 1fr;}}
.card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);}
.card-header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.card-body{padding:16px}
.footer{color:var(--muted);text-align:center;padding:24px 16px}
.badge{display:inline-flex;align-items:center;padding:4px 8px;border-radius:999px;font-size:12px;font-weight:600}
.badge-ghost{background:#f3f4f6;color:#374151}
.badge-green{background:var(--green-bg);color:var(--green)}
.badge-yellow{background:var(--yellow-bg);color:var(--yellow)}
.badge-red{background:var(--red-bg);color:var(--red)}
.badge-blue{background:var(--blue-bg);color:var(--blue)}

/* CPF copiável na lista (sem alertas) */
.cpf-copy{
  background:transparent;
  border:0;
  padding:0;
  margin:0;
  font:inherit;
  color:#0a58ca;
  cursor:pointer;
  text-decoration:underline;
  white-space:nowrap;
  display:inline-block;
}
.cpf-copy:hover{opacity:.9}
.cpf-copy:focus{outline:2px solid rgba(0,0,0,.2);outline-offset:2px;border-radius:6px}
.cpf-copy.copied{opacity:.6}

/* Visitas: destacar pendências na lista */
.visita-row-pendencia{background: rgba(239,68,68,.10)}
.visita-row-sem-pendencia{background: rgba(34,197,94,.10)}
.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;transition:.15s}
.btn:hover{background:#f9fafb}
.btn-primary{background:var(--primary);color:#fff;border-color:var(--primary)}
.btn-primary:hover{opacity:.95}
html[data-theme="dark"] .btn{background:rgba(255,255,255,.02)}
html[data-theme="dark"] .btn:hover{background:rgba(255,255,255,.06)}
html[data-theme="dark"] .btn-primary{background:#e5e7eb;color:#0b1220;border-color:#e5e7eb}

/* Utility button variants */
.btn-secondary{background:#f3f4f6;color:var(--text);border-color:var(--border)}
.btn-secondary:hover{background:#e5e7eb}

.btn-danger{background:var(--red);color:#fff;border-color:var(--red)}
.btn-danger:hover{opacity:.95}

.btn-success{background:var(--green);color:#fff;border-color:var(--green)}
.btn-success:hover{opacity:.95}

.btn-warning{background:var(--yellow);color:#fff;border-color:var(--yellow)}
.btn-warning:hover{opacity:.95}
.input,select,textarea{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:10px;outline:none}
.input:focus, select:focus, textarea:focus{border-color:#111827;box-shadow:0 0 0 3px rgba(0,0,0,.08)}
.label{display:block;font-size:13px;color:#334155;margin-bottom:6px;font-weight:700;letter-spacing:.2px}

/* Dark mode: labels/legendas precisam ter contraste */
html[data-theme="dark"] .label{color:#cbd5e1}
html[data-theme="dark"] .small{color:rgba(229,231,235,.78)}

/* Required fields: make them obvious (all modules/pages)
   - Labels get a red asterisk
   - Inputs/selects/textarea get a subtle highlight
*/
.label.required::after{content:" *";color:var(--red);font-weight:800}
input.is-required, select.is-required, textarea.is-required{
  border-color:#fca5a5;
  background:#fff7f7;
}

/* Dark mode: campos obrigatórios não podem ficar "brancos"/estourados */
html[data-theme="dark"] input.is-required,
html[data-theme="dark"] select.is-required,
html[data-theme="dark"] textarea.is-required{
  background:rgba(239,68,68,.12);
  border-color:rgba(248,113,113,.55);
  color:var(--text);
}
html[data-theme="dark"] input.is-required::placeholder,
html[data-theme="dark"] textarea.is-required::placeholder{
  color:rgba(248,113,113,.75);
  opacity:.55;
}
input.is-required:focus, select.is-required:focus, textarea.is-required:focus{
  border-color:var(--red);
  box-shadow:0 0 0 3px rgba(153,27,27,.15);
}
input.is-required::placeholder, textarea.is-required::placeholder{color:#9b1c1c;opacity:.35}
.table{width:100%;border-collapse:collapse;font-size:14px}
.table thead{background:#f9fafb;position:sticky;top:58px}
.table th,.table td{padding:10px;border-bottom:1px solid var(--border);text-align:left}

/* Dark mode: cabeçalho de tabela não pode ficar branco */
html[data-theme="dark"] .table thead{
  background:rgba(255,255,255,.04) !important;
}
html[data-theme="dark"] .table thead th{
  background:rgba(255,255,255,.04) !important;
  color:#cbd5e1 !important;
}
html[data-theme="dark"] .table th,
html[data-theme="dark"] .table td{
  border-bottom-color:rgba(255,255,255,.10);
}

/* Inputs/Selects: garantir texto e placeholder bons no dark */
html[data-theme="dark"] .input,
html[data-theme="dark"] select,
html[data-theme="dark"] textarea{
  background:rgba(255,255,255,.03);
  color:var(--text);
}
html[data-theme="dark"] .input::placeholder,
html[data-theme="dark"] textarea::placeholder{
  color:rgba(229,231,235,.55);
}

/* Modais: botão de fechar precisa aparecer */
html[data-theme="dark"] .closebtn,
html[data-theme="dark"] .close{
  color:var(--text) !important;
}
html[data-theme="dark"] .closebtn:hover,
html[data-theme="dark"] .close:hover{
  background:rgba(255,255,255,.06) !important;
}

/* Chips/tags criados via JS (configurar atendimentos/visitas) */
html[data-theme="dark"] #setores_list .btn,
html[data-theme="dark"] .chip,
html[data-theme="dark"] .tag,
html[data-theme="dark"] .pill{
  color:var(--text) !important;
  border-color:rgba(255,255,255,.14) !important;
}
.kbd{padding:2px 6px;border-radius:6px;border:1px solid var(--border);background:#f9fafb;color:#374151;font-size:11px}
.row{display:flex;flex-wrap:wrap;gap:12px}

/* Registrar atendimento: refinamentos visuais (profissional) */
.page-card--narrow{max-width:720px;margin:0 auto}
.page-title{margin:0;font-size:18px;letter-spacing:.6px}
.page-actions{display:flex;align-items:center;gap:10px;flex-wrap:wrap;justify-content:flex-end}
.badge-ico{opacity:.75;margin-right:6px}

.flash{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--border);
  margin:0 0 12px 0;
  font-weight:650;
  letter-spacing:.25px;
}
.flash b{font-weight:800}
.flash--success{background:var(--green-bg);border-color:rgba(16,185,129,.35);color:var(--green)}
.flash--danger{background:var(--red-bg);border-color:rgba(239,68,68,.30);color:var(--red)}
.flash--warning{background:var(--yellow-bg);border-color:rgba(245,158,11,.28);color:var(--yellow)}
.flash--info{background:var(--blue-bg);border-color:rgba(59,130,246,.25);color:var(--blue)}
.flash-title{font-weight:800;letter-spacing:.4px}
.flash--ticket{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.flash-ticket__text{min-width:220px}

.label-row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:6px}
.label-row .label{margin-bottom:0}

.field-status{font-size:12px;font-weight:750;letter-spacing:.35px;color:var(--muted)}
.field-status--ok{color:var(--green)}
.field-status--bad{color:var(--red)}
.field-status--loading{color:var(--muted)}

/* Toggle (gerar ticket) */
.form-right{margin-left:auto;display:inline-flex;align-items:center;gap:10px;user-select:none}
.switch{position:relative;display:inline-block;width:44px;height:26px}
.switch input{opacity:0;width:0;height:0}
.switch__slider{
  position:absolute;cursor:pointer;inset:0;
  background:rgba(107,114,128,.30);
  border:1px solid var(--border);
  border-radius:999px;
  transition:.2s;
}
.switch__slider:before{
  content:"";
  position:absolute;
  height:20px;width:20px;
  left:3px;top:2px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:999px;
  transition:.2s;
  box-shadow:0 4px 10px rgba(0,0,0,.10);
}
.switch input:checked + .switch__slider{background:rgba(17,24,39,.85);border-color:rgba(17,24,39,.85)}
html[data-theme="dark"] .switch input:checked + .switch__slider{background:rgba(229,231,235,.85);border-color:rgba(229,231,235,.85)}
.switch input:checked + .switch__slider:before{transform:translateX(18px)}
.switch__label{font-size:.95rem;font-weight:700;letter-spacing:.25px;color:var(--text)}

.col{flex:1 1 220px}

/* Utility: force a field to take half width (2 per row) regardless of wrapper classes */
.col-6{flex:0 0 calc((100% - 12px)/2);max-width:calc((100% - 12px)/2)}

/* Forms: force exactly 2 fields per row (desktop/tablet), 1 per row (mobile)
   Used in Registrar atendimento to guarantee:
   (CPF) (NOME)
   (SETOR) (TIPO)
*/
.form-two-col .col{flex:0 0 calc((100% - 12px)/2);max-width:calc((100% - 12px)/2)}
@media (max-width: 640px){
  .form-two-col .col{flex-basis:100%;max-width:100%}
  .col-6{flex-basis:100%;max-width:100%}
}
.small{font-size:12px;color:var(--muted)}
.mt-2{margin-top:8px}.mb-2{margin-bottom:8px}.mb-3{margin-bottom:12px}.mb-4{margin-bottom:16px}.mt-4{margin-top:16px}
.p-0{padding:0}.p-1{padding:4px}.p-2{padding:8px}.p-3{padding:12px}.p-4{padding:16px}
.divider{height:1px;background:var(--border);margin:8px 0}


/* v38: enforce visibility for last rows */
.table tbody tr { display: table-row; visibility: visible; opacity: 1; }
.table tbody tr:last-child { display: table-row; visibility: visible; opacity: 1; }
.table tbody td { visibility: visible; }



/* v39: neutralize sticky/overlay that hides last row */
.table thead th,
.table thead td {
  position: static !important;
  z-index: auto !important;
  box-shadow: none !important;
}
.table thead { position: static !important; z-index: auto !important; }
.table { border-collapse: separate; }
.table::after, .table::before { display: none !important; content: none !important; }

/* Ensure tbody rows are rendered above any overlapping elements */
.table tbody { position: relative; z-index: 1; }
.table tbody tr { position: relative; z-index: 1; }

/* Container must not clip rows (only in main pages, not inside modals) */
main .table-wrapper, main .card-body, main .card {
  overflow: visible !important;
}

/* Modals MUST scroll when content is taller than the viewport */
.astro-modal .card{
  overflow:auto !important;
  max-height:calc(100vh - 24px) !important;
}
.astro-modal .body{
  overflow:visible !important;
}

/* Safety: ensure there is spacing below filters so they don't overlap table */
.filters, form.filters, .filters-row {
  margin-bottom: 12px !important;
}

/* Safety: no max-height constraints that could clip */
.table-wrapper { max-height: none !important; height: auto !important; }


/* v40: grid layout for forms that must be 2 por linha (resolve de vez) */
.form-grid-2{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:12px}
.form-grid-2 .field{min-width:0}
@media (max-width: 640px){
  .form-grid-2{grid-template-columns:1fr}
}
.form-actions{margin-top:12px;display:flex;gap:10px;flex-wrap:wrap}

/* v41+: ações como botões (ícones) na lista de atendimentos */
.action-group{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.action-btn{
  appearance:none;
  border:1px solid var(--border-subtle);
  background:var(--card);
  border-radius:10px;
  padding:6px 10px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:0;
  line-height:1;
  font: inherit;
  font-size: 14px;
  text-decoration:none;
  color: var(--text);
  white-space:nowrap;
}
.action-btn:hover{opacity:.9}
.action-btn:focus{ outline: 2px solid rgba(59,130,246,.35); outline-offset: 2px; }
.action-btn[disabled]{opacity:.5;cursor:not-allowed}
.action-btn.danger{ border-color: rgba(185,28,28,.35); color: var(--danger, #b91c1c); }
.action-btn.danger:hover{ background:#fef2f2; }

/* Mantém compatibilidade caso algum template ainda use links de ação como texto */
.action-link{
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  cursor: pointer;
  font: inherit;
  font-size: 12px;
  color: var(--primary);
  text-decoration: underline;
}
.action-link:hover{ text-decoration: none; opacity: .85; }
.action-link:focus{ outline: 2px solid rgba(59,130,246,.35); outline-offset: 2px; border-radius: 6px; }
.action-link.danger{ color: var(--danger, #b91c1c); }

/* v42+: abrir atendimento em modal (sem sair da lista) */
.at-row{cursor:pointer}
.at-row:hover{background: rgba(59,130,246,.06)}
.at-row:focus{outline: 2px solid rgba(59,130,246,.35); outline-offset: -2px;}
.js-open-atendimento-link{color: var(--primary); text-decoration: underline;}
.js-open-atendimento-link:hover{text-decoration: none; opacity: .9;}

/* ===== Painel Geral (owner/modulos) ===== */
.owner-msg{margin-bottom:12px;padding:8px 10px;border-radius:10px;border:1px solid var(--border-subtle)}
.owner-msg.ok{background:#ecfdf3;border-color:#bbf7d0;color:#166534}
.owner-msg.err{background:#fef2f2;border-color:#fecaca;color:#991b1b}

.owner-tabs{display:flex;flex-wrap:wrap;gap:8px;margin:10px 0 14px}
.owner-tab{
  appearance:none;
  border:1px solid var(--border-subtle);
  background:var(--card);
  border-radius:999px;
  padding:8px 12px;
  font: inherit;
  font-size: 12px;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:8px;
}
.owner-tab:hover{opacity:.9}
.owner-tab.is-active{border-color:rgba(59,130,246,.55);box-shadow:0 0 0 3px rgba(59,130,246,.15)}
.owner-tab-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  min-width:24px;
  height:18px;
  padding:0 6px;
  border-radius:999px;
  border:1px solid var(--border-subtle);
  font-size:11px;
  color:var(--muted);
}

.owner-panels{border:1px solid var(--border-subtle);border-radius:14px;background:#fff}
.owner-panel{display:none;padding:16px}
.owner-panel.is-active{display:block}
.owner-panel-title{font-weight:800;margin-bottom:6px}

@media (max-width: 640px){
  .owner-panel{padding:12px}
  .owner-tabs{gap:6px}
  .owner-tab{padding:8px 10px}
}

/* Layout: registrar visita domiciliar (linhas com múltiplos campos) */
.grid-form{display:grid;grid-template-columns:repeat(12,minmax(0,1fr));gap:12px;align-items:end}
.grid-form .field{min-width:0}
.grid-form .span-12{grid-column:span 12}
.grid-form .span-8{grid-column:span 8}
.grid-form .span-6{grid-column:span 6}
.grid-form .span-4{grid-column:span 4}
.grid-form .span-3{grid-column:span 3}
.grid-form .span-2{grid-column:span 2}
.grid-form .span-1{grid-column:span 1}
@media (max-width: 900px){
  .grid-form{grid-template-columns:repeat(6,minmax(0,1fr))}
}
@media (max-width: 620px){
  .grid-form{grid-template-columns:repeat(1,minmax(0,1fr))}
  .grid-form .span-12,.grid-form .span-8,.grid-form .span-6,.grid-form .span-4,.grid-form .span-3,.grid-form .span-2,.grid-form .span-1{grid-column:span 1}
}



/* ------------------------------------------------------------------ */
/* Top bar actions (ícones) + drawer */
/* ------------------------------------------------------------------ */
.top-actions{display:flex;align-items:center;gap:10px}
.iconbtn{
  width:38px;height:38px;border-radius:12px;
  border:1px solid var(--border);
  background:var(--card);
  display:inline-flex;align-items:center;justify-content:center;
  cursor:pointer;
  position:relative;
  transition:transform .06s ease, background .15s, border-color .15s;
}
.iconbtn:hover{transform:translateY(-1px)}
.iconbtn.active{background:rgba(59,130,246,.12);border-color:rgba(59,130,246,.35)}
html[data-theme="dark"] .iconbtn.active{background:rgba(59,130,246,.18);border-color:rgba(59,130,246,.45)}
.iconbtn svg{width:20px;height:20px;fill:var(--text)}
.iconbtn:focus{outline:2px solid rgba(59,130,246,.35);outline-offset:2px}

.notif-badge{
  position:absolute;top:-6px;right:-6px;
  min-width:18px;height:18px;
  padding:0 5px;
  border-radius:999px;
  background:#2563eb;
  color:#fff;
  font-size:11px;
  font-weight:800;
  display:flex;
  align-items:center;
  justify-content:center;
  border:2px solid var(--bg);
}

.theme-icon{display:inline-flex}
#themeToggle .theme-icon-sun{display:none}
html[data-theme="dark"] #themeToggle .theme-icon-sun{display:inline-flex}
html[data-theme="dark"] #themeToggle .theme-icon-moon{display:none}

/* Drawer */
.top-drawer{position:fixed;inset:0;display:none;z-index:9998}
.top-drawer.is-open{display:block}
.top-drawer .backdrop{position:absolute;inset:0;background:rgba(0,0,0,.35)}
.top-drawer .panel{
  position:absolute;top:10px;right:10px;
  width:min(320px,calc(100vw - 20px));
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
  overflow:hidden;
}
.drawer-header{padding:14px 16px;border-bottom:1px solid var(--border)}
.drawer-header .hello{font-size:15px}
.drawer-nav{display:flex;flex-direction:column;padding:8px}
.drawer-nav a{
  padding:10px 12px;
  border-radius:12px;
  color:var(--text);
  text-decoration:none;
  font-weight:600;
}
.drawer-nav svg{width:18px;height:18px;fill:var(--text);flex:0 0 auto}
.drawer-nav a.danger svg{fill:#b91c1c}

/* Botão de tema dentro do drawer (é um <button>, não <a>) */
.drawer-nav button{
  padding:10px 12px;
  border-radius:12px;
  color:var(--text);
  text-decoration:none;
  font-weight:600;
  text-align:left;
  background:transparent;
  border:0;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
}
.drawer-nav button:hover{background:rgba(0,0,0,.05)}
.drawer-nav button svg{fill:var(--text)}

/* "Olá, usuário" no topo (fora do menu) */
.top-hello{font-weight:700;opacity:.9;white-space:nowrap}
.drawer-nav a:hover{background:rgba(0,0,0,.05);text-decoration:none}
.drawer-nav a.danger{color:#b91c1c}
.drawer-nav a.danger:hover{background:rgba(185,28,28,.10)}
body.drawer-open{overflow:hidden}

@media (max-width: 760px){
  .top-actions{gap:8px}
  .iconbtn{width:36px;height:36px;border-radius:12px}
}

/* ------------------------------------------------------------------ */
/* Tema escuro (dark mode) */
/* ------------------------------------------------------------------ */
html[data-theme="dark"]{
  --bg: #0b1220;
  --card: #0f172a;
  --text: #e5e7eb;
  --muted: #9ca3af;
  --primary: #e5e7eb;
  --border: rgba(255,255,255,.10);
  --shadow: 0 10px 20px rgba(0,0,0,0.35);
  --brand: #e5e7eb;

  --green:#34d399; --green-bg:rgba(52,211,153,.15);
  --yellow:#fbbf24; --yellow-bg:rgba(251,191,36,.14);
  --red:#f87171; --red-bg:rgba(248,113,113,.14);
  --blue:#60a5fa; --blue-bg:rgba(96,165,250,.14);
}
html[data-theme="dark"] header{
  background:rgba(15,23,42,.86);
}
html[data-theme="dark"] a{color:#93c5fd}
html[data-theme="dark"] a:hover{opacity:.95}
html[data-theme="dark"] .nav a:hover{background:rgba(255,255,255,.06)}
html[data-theme="dark"] .toast{background:#0f172a;color:#e5e7eb}
html[data-theme="dark"] .astro-modal .card{background:var(--card)}
html[data-theme="dark"] .astro-modal .actions{background:var(--card)}
html[data-theme="dark"] .drawer-nav a:hover{background:rgba(255,255,255,.06)}


/* Notificações */
.notif-drawer .panel{width:min(420px,calc(100vw - 24px))}
.notif-list{display:flex;flex-direction:column;gap:8px;padding:12px 12px 14px}
.notif-item{
  width:100%;
  border:1px solid var(--border);
  background:var(--card);
  color:var(--text);
  border-radius:14px;
  padding:12px 12px;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  cursor:pointer;
  text-align:left;
  transition:.15s;
}
.notif-item:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
.nt-title{font-weight:800;line-height:1.2}
.nt-meta{font-size:.88rem;opacity:.8;margin-top:4px}
.nt-right{display:flex;flex-direction:column;align-items:flex-end;gap:6px;flex:0 0 auto}
.nt-time{font-size:.78rem;opacity:.65;white-space:nowrap}
.nt-x{font-size:20px;line-height:18px;width:22px;height:22px;border-radius:8px;display:grid;place-items:center;opacity:.6}
.nt-x:hover{opacity:1;background:rgba(0,0,0,.06)}
html[data-theme="dark"] .nt-x:hover{background:rgba(255,255,255,.10)}
.iconbtn.smallbtn{width:36px;height:36px;border-radius:12px}

body.drawer-open header{z-index:10000;background:var(--card);backdrop-filter:none}


/* --- Notificações: evita crescer demais ao "Carregar mais" --- */
#notifDrawer .panel{
  max-height: min(78vh, 560px);
  /* Largura mais compacta e profissional */
  width: min(420px, calc(100vw - 24px));
  display:flex;
  flex-direction:column;
}
#notifDrawer .drawer-body{
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
}
#notifDrawer .notif-footer{
  position: sticky;
  bottom: 0;
  background: var(--card, #fff);
  padding-top: 10px;
  box-shadow: 0 -10px 18px rgba(0,0,0,.06);
}
#notifDrawer .notif-list{
  padding-bottom: 8px;
}

/* Apenas o nome em negrito (tipo sem negrito) */
.notif-item .nt-title{font-weight:400}
.notif-item .nt-title strong{font-weight:800}




/* --- PATCH v9: Notificações (título não corta + só NOME em negrito) --- */
.notif-item .nt-left{flex:1 1 auto; min-width:0;}
/* Garante que apenas o <strong> (nome) fique em negrito */
.notif-item .nt-title{font-weight:400 !important; line-height:1.25; white-space:normal; overflow-wrap:anywhere; word-break:break-word;}
.notif-item .nt-title span{font-weight:400 !important;}
.notif-item .nt-title strong{font-weight:800 !important;}
/* Evita a coluna da direita esmagar o texto */
.notif-item .nt-right{flex:0 0 auto; max-width:45%;}
@media (max-width:480px){
  .notif-item .nt-right{max-width:52%;}
}



/* --- PATCH v10: Notificações (texto não corta + negrito só no nome) --- */
.notif-item .nt-left{min-width:0; flex:1 1 auto;}
.notif-item .nt-title{
  font-weight:400 !important;
  line-height:1.25;
  white-space:normal;
  overflow-wrap:anywhere;
  word-break:break-word;
}
.notif-item .nt-title span{font-weight:400 !important;}
.notif-item .nt-title strong{font-weight:800 !important;}
/* garante que a coluna de data/hora não “esmague” o título */
.notif-item .nt-right{flex:0 0 auto; max-width: 180px;}
.notif-item .nt-time{white-space:nowrap;}



/* ------------------------------------------------------------------ */
/* v17: Dark mode fixes (config modals + native select dropdown)       */
/* ------------------------------------------------------------------ */
html[data-theme="dark"] .owner-panels{ background: var(--card) !important; }

html[data-theme="dark"] select,
html[data-theme="dark"] textarea,
html[data-theme="dark"] input{
  background: rgba(255,255,255,.03);
  color: var(--text);
  border-color: var(--border);
  /* ajuda o dropdown nativo (Windows/Chrome) a respeitar o tema */
  color-scheme: dark;
}
html[data-theme="dark"] select option{
  background: #0f172a;
  color: #e5e7eb;
}



/* Dark mode: chips/tags (Configurar Atendimentos/Visitas) — garantir fundo escuro (antes ficava branco) */
/* Obs: alguns chips são criados via JS no admin_config.html (classe .pd-chip). */
html[data-theme="dark"] #setores_list .btn,
html[data-theme="dark"] .pd-chip,
html[data-theme="dark"] .chip,
html[data-theme="dark"] .tag,
html[data-theme="dark"] .pill{
  background: rgba(255,255,255,.06) !important;
  color: var(--text) !important;
  border: 1px solid rgba(255,255,255,.14) !important;
}
html[data-theme="dark"] #setores_list .btn:hover,
html[data-theme="dark"] .pd-chip:hover,
html[data-theme="dark"] .chip:hover,
html[data-theme="dark"] .tag:hover,
html[data-theme="dark"] .pill:hover{
  background: rgba(255,255,255,.10) !important;
}
html[data-theme="dark"] #setores_list .btn *,
html[data-theme="dark"] .pd-chip *,
html[data-theme="dark"] .chip *,
html[data-theme="dark"] .tag *,
html[data-theme="dark"] .pill *{
  color: var(--text) !important;
  opacity: 1 !important;
}

/* Garante que a base do chip não herde "btn" branco em alguns browsers */
.pd-chip{
  background: rgba(255,255,255,.85);
  border: 1px solid rgba(15,23,42,.10);
}

/* ------------------------------------------------------------------
   Botões fixos (Registrar / Lista / Relatórios)
   - padrão: branco
   - selecionado: preto
------------------------------------------------------------------- */
.quick-nav{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.btn.btn-nav{background:#fff;color:#0f172a;border:1px solid rgba(15,23,42,.14)}
.btn.btn-nav:hover{filter:brightness(.98)}
.btn.btn-nav.active{background:#000;color:#fff;border-color:#000}
.btn.btn-nav.active:hover{filter:brightness(1)}

html[data-theme="dark"] .btn.btn-nav{background:rgba(255,255,255,.08);color:var(--text);border:1px solid rgba(255,255,255,.16)}
html[data-theme="dark"] .btn.btn-nav.active{background:#fff;color:#000;border-color:#fff}
